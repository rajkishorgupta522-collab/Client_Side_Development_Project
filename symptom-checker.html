<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HealthSync - Symptom Checker</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

  <link rel="stylesheet" href="styles.css">
</head>

<body>

  <nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container">
      <a class="navbar-brand" href="index.html"><i class="fas fa-heartbeat me-2"></i>HealthSync</a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="login.html">Login</a></li>
          <li class="nav-item"><a class="nav-link active" href="symptom-checker.html">Symptom Checker</a></li>
          <li class="nav-item"><a class="nav-link" href="about.html">About Us</a></li>
          <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
        </ul>
      </div>
    </div>
  </nav>


  <div class="container py-4">

    <div class="row mb-4">
      <div class="col-12">
        <h2 class="fw-bold">Symptom Checker</h2>
        <p class="lead">Enter symptoms, severity and duration to get meaningful daily-life health insights.</p>
      </div>
    </div>

    <div class="row">

      <div class="col-lg-6">

        <div class="card symptom-card mb-3">
          <div class="card-header">Describe Your Symptoms</div>
          <div class="card-body">

            <div class="mb-3">
              <label class="form-label">Select Body Area</label>
              <select class="form-select" id="body-area">
                <option>Head & Neck</option>
                <option>Chest & Back</option>
                <option>Abdomen</option>
                <option>Arms & Hands</option>
                <option>Legs & Feet</option>
                <option>Skin</option>
                <option selected>General/Whole Body</option>
              </select>
            </div>

            <div class="mb-3">
              <label class="form-label">Symptoms</label>
              <input type="text" class="form-control" id="symptom-input" placeholder="e.g., fever, headache, dizziness...">
            </div>

            <div class="mb-3">
              <label class="form-label">Severity</label>
              <div class="d-flex justify-content-between text-muted">
                <span>Mild</span><span>Severe</span>
              </div>
              <input type="range" min="1" max="10" id="symptom-severity" class="form-range">
            </div>

            <div class="mb-3">
              <label class="form-label">Duration</label>
              <div class="input-group">
                <input type="number" class="form-control" id="symptom-duration" placeholder="e.g., 3">
                <select class="form-select" id="duration-unit">
                  <option>Hours</option>
                  <option>Days</option>
                  <option>Weeks</option>
                  <option>Months</option>
                </select>
              </div>
            </div>

            <button class="btn btn-primary w-100" id="analyze-btn">
              <i class="fas fa-search me-2"></i>Analyze Symptoms
            </button>

          </div>
        </div>

        <div class="card">
          <div class="card-header">Common Symptoms</div>
          <div class="card-body">
            <span class="symptom-tag">Headache</span>
            <span class="symptom-tag">Fever</span>
            <span class="symptom-tag">Cough</span>
            <span class="symptom-tag">Fatigue</span>
            <span class="symptom-tag">Nausea</span>
            <span class="symptom-tag">Dizziness</span>
            <span class="symptom-tag">Back Pain</span>
            <span class="symptom-tag">Chest Pain</span>
          </div>
        </div>

      </div>


      <div class="col-lg-6">

        <div class="card analysis-card mb-3">
          <div class="card-header">Analysis Results</div>
          <div class="card-body" id="analysis-results">
            <div class="text-center py-5">
              <i class="fas fa-stethoscope fa-3x text-muted mb-3"></i>
              <p class="text-muted">Enter symptoms and click "Analyze".</p>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">Health Tips</div>
          <div class="card-body">
            <ul class="list-group list-group-flush">
              <li class="list-group-item"><i class="fas fa-leaf text-success me-2"></i>Drink enough water daily</li>
              <li class="list-group-item"><i class="fas fa-bed text-success me-2"></i>Take proper rest</li>
              <li class="list-group-item"><i class="fas fa-apple-alt text-success me-2"></i>Eat fresh & nutritious foods</li>
              <li class="list-group-item"><i class="fas fa-hands-wash text-success me-2"></i>Maintain hygiene</li>
            </ul>
          </div>
        </div>

      </div>

    </div>

  </div>


  <footer>
    <div class="container text-center">
      <hr class="bg-light">
      <p>&copy; HealthSync | Health & Wellbeing | BSc Computing Systems Projects
  </footer>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>



  <script>

  document.addEventListener('DOMContentLoaded', () => {
    if (!localStorage.getItem('loggedInUser')) {
      alert("Please login to access the Symptom Checker.");
      window.location.href = "login.html";
    }

    document.querySelectorAll(".symptom-tag").forEach(tag => {
      tag.addEventListener("click", () => {
        const input = document.getElementById("symptom-input");
        input.value = input.value
          ? input.value + ", " + tag.textContent
          : tag.textContent;
      });
    });
  });



  const symptomSynonyms = {
    "headache": ["head hurts", "pain in head", "heavy head", "head is hurting"],
    "fever": ["high temperature", "hot body"],
    "cough": ["dry cough", "wet cough", "coughing"],
    "fatigue": ["tired", "exhausted", "no energy", "weak"],
    "dizziness": ["lightheaded", "feel faint", "fainting", "room spinning"],
    "nausea": ["feel like vomiting", "sick to stomach"],
    "vomiting": ["throwing up", "vomit", "barfing"],
    "stomach pain": ["stomach hurts", "belly pain", "abdominal pain"],
    "chest pain": ["tight chest", "pressure chest", "pain in chest"],
    "back pain": ["back hurts", "lower back hurting"]
  };



  
  const symptomDatabase = {
    "headache": ["Migraine", "Tension Headache", "Dehydration"],
    "fever": ["Flu", "Viral Infection", "Common Cold"],
    "cough": ["Common Cold", "Bronchitis", "Allergy"],
    "fatigue": ["Anemia", "Vitamin Deficiency", "Stress"],
    "dizziness": ["Vertigo", "Low Blood Pressure", "Dehydration"],
    "nausea": ["Gastritis", "Food Poisoning", "Stomach Flu"],
    "vomiting": ["Food Poisoning", "Stomach Infection"],
    "stomach pain": ["Indigestion", "Gastritis", "Food Poisoning"],
    "chest pain": ["Anxiety", "Heartburn", "Muscle Strain"],
    "back pain": ["Poor Posture", "Muscle Strain"]
  };



  
  function detectSymptoms(text) {
    const lower = text.toLowerCase();
    let found = [];

    Object.keys(symptomDatabase).forEach(sym => {
      if (lower.includes(sym)) found.push(sym);
    });

    Object.keys(symptomSynonyms).forEach(sym => {
      symptomSynonyms[sym].forEach(phrase => {
        if (lower.includes(phrase)) found.push(sym);
      });
    });

    return [...new Set(found)];
  }




  function analyzeSymptoms(text, severity, duration) {
    const detected = detectSymptoms(text);
    let conditionCounts = {};

    detected.forEach(sym => {
      if (symptomDatabase[sym]) {
        symptomDatabase[sym].forEach(cond => {
          conditionCounts[cond] = (conditionCounts[cond] || 0) + 1;
        });
      }
    });

    let results = Object.entries(conditionCounts).map(([cond, count]) => {

      let score = Math.min(20 + count * 15 + severity * 3 + duration * 2, 95);

      let risk = "Low";
      if (score >= 70) risk = "High";
      else if (score >= 40) risk = "Medium";

      return { 
        name: cond, 
        match: score, 
        risk: risk 
      };
    });

    return { detected, results };
  }



 
  document.getElementById("analyze-btn").addEventListener("click", () => {

    const input = document.getElementById("symptom-input").value.trim();
    const severity = parseInt(document.getElementById("symptom-severity").value) || 1;
    const duration = parseInt(document.getElementById("symptom-duration").value) || 1;

    if (!input) {
      alert("Please enter symptoms.");
      return;
    }

    const analysis = analyzeSymptoms(input, severity, duration);

    if (analysis.detected.length === 0) {
      document.getElementById("analysis-results").innerHTML =
        `<p class="text-danger">Couldn't identify symptoms. Try common words like fever, cough, headache.</p>`;
      return;
    }

    let html = `
      <h5>Detected Symptoms:</h5>
      <p><strong>${analysis.detected.join(", ")}</strong></p>

      <h5>Possible Conditions:</h5>
    `;

    analysis.results.forEach(r => {
      html += `
        <div class="mb-3">
          <div class="d-flex justify-content-between">
            <strong>${r.name}</strong>
            <span>${r.match}% match</span>
          </div>

          <div class="progress mb-1">
            <div class="progress-bar
              ${r.risk === "High" ? "bg-danger" :
                r.risk === "Medium" ? "bg-warning" : "bg-success"}"
              style="width:${r.match}%;">
            </div>
          </div>

          <p class="small ${
            r.risk === "High" ? "risk-high" :
            r.risk === "Medium" ? "risk-medium" : "risk-low"
          }">
            Risk Level: ${r.risk}
          </p>
        </div>
      `;
    });

    document.getElementById("analysis-results").innerHTML = html;
  });

  </script>

</body>
</html>
